@model Repository.Models.UserLeavePolicy

@{
  ViewBag.Title = "Create";
  Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/js/bootstrap-select.min.js"></script>


<!-- DataTables -->
<link rel="stylesheet" href="../../plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
<link rel="stylesheet" href="../../plugins/datatables-responsive/css/responsive.bootstrap4.min.css">

<!-- left column -->
<div class="col-md-6">
  <!-- general form elements -->
  <div class="card card-primary">
    <div class="card-header">
      <h3 class="card-title">User Leave Policy</h3>
    </div>
    <!-- /.card-header -->
    <!-- form start -->


    @using (Html.BeginForm())
    {
      @Html.AntiForgeryToken()

  <div class="card-body">

    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
    <div class="form-group">
      @Html.LabelFor(model => model.UserId, "User", htmlAttributes: new { @class = " " })

      @Html.DropDownList("UserId", null, htmlAttributes: new { @class = "form-control" })
      @Html.ValidationMessageFor(model => model.UserId, "", new { @class = "text-danger" })

    </div>
    <div class="form-group">
      @Html.LabelFor(model => model.FiscalYearStart, "Fiscal Year Start", htmlAttributes: new { @class = " " })

      @Html.EditorFor(model => model.FiscalYearStart, new { htmlAttributes = new { @class = "form-control" } })
      @Html.ValidationMessageFor(model => model.FiscalYearStart, "", new { @class = "text-danger" })

    </div>

    <div class="form-group">
      @Html.LabelFor(model => model.FiscalYearEnd, "Fiscal Year End", htmlAttributes: new { @class = " " })

      @Html.EditorFor(model => model.FiscalYearEnd, new { htmlAttributes = new { @class = "form-control" } })
      @Html.ValidationMessageFor(model => model.FiscalYearEnd, "", new { @class = "text-danger" })

    </div>

    <div class="form-group">
      @Html.LabelFor(model => model.FiscalYearPeriod, "Fiscal Year Period", htmlAttributes: new { @class = " " })

      @Html.EditorFor(model => model.FiscalYearPeriod, new { htmlAttributes = new { @class = "form-control" } })
      @Html.ValidationMessageFor(model => model.FiscalYearPeriod, "", new { @class = "text-danger" })

    </div>

    <div class="form-group">
      @Html.LabelFor(model => model.WeeklyOffDays, "Weekly Off Days", htmlAttributes: new { @class = " " })

      @*@Html.EditorFor(model => model.WeeklyOffDays, new { htmlAttributes = new { @class = "form-control" } })*@
      <br>
      <select class="selectpicker" id="multiselect" multiple data-live-search="false">
        <option value="1">Saturday</option>
        <option value="2">Sunday</option>
        <option value="3">Monday</option>
        <option value="4">Tuesday</option>
        <option value="5">Wednesday</option>
        <option value="6">Thursday</option>
        <option value="7">Friday</option>
      </select>
      @Html.ValidationMessageFor(model => model.WeeklyOffDays, "", new { @class = "text-danger" })

    </div>

    <div class="form-group">
      @Html.LabelFor(model => model.AnnualOffDays, "Annual Off Days", htmlAttributes: new { @class = " " })

      @*@Html.EditorFor(model => model.AnnualOffDays, new { htmlAttributes = new { @class = "form-control" } })*@

      <br>
      <div class="alert alert-success" role="alert">
        <div class="alert-icon">

        </div>
        (1) Please chosse file. This file should contain Annual off days record in three comma separated columns (CSV) <mark>No,Date,Description</mark> format
      </div>
      <input type="file" id="FileUpload1" />
      @*       @Html.ValidationMessageFor(model => model.AnnualOffDays, "", new { @class = "text-danger" })*@

      <br />

      <div class="alert alert-success" role="alert">
        <div class="alert-icon">

        </div>
        (2) Click to upload file.
      </div>

      <input type="button" id="btnUpload" value="Upload file" class="btn btn-primary" />
      <br />

    </div>
    <div id="NewData">
      @{
        if (ViewBag.AnnualLeaves != null)
        {
          Html.RenderPartial("_DisplayAnnualLeaves");
        }
      }
    </div>
    <section class="content">
      <div class="row">
        <div class="col-12">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Total Leave Allowed</h3>
              <br />
              <hr />

              <div d="example2_wrapper" class="dataTables_wrapper dt-bootstrap4">
                <div class="row">
                  <div class="col-sm-12 col-md-6">
                  </div>
                  <div class="col-sm-12 col-md-6"></div>
                </div>
                <div class="row">
                  <div class="col-sm-12">

                    <table class="table table-bordered table-hover dataTable dtr-inline" role="grid">
                      <thead>
                        <tr>

                          <th>Leave Type</th>
                          <th>Allowed</th>
                          <th>Description</th>


                        </tr>
                      </thead>
                      <tbody>
                        <tr>

                          <td> @Html.DropDownList("LeaveTypeNo1", (IEnumerable<SelectListItem>)ViewBag.LeaveTypes, null, new { @class = "form-control" })</td>
                          <td><input class="form-control" placeholder="Allowed"> </td>
                          <td><input class="form-control" placeholder="Description"> </td>


                        </tr>
                        <tr>

                          <td> @Html.DropDownList("LeaveTypeNo2", (IEnumerable<SelectListItem>)ViewBag.LeaveTypes, null, new { @class = "form-control" })</td>
                          <td><input class="form-control" placeholder="Allowed"> </td>
                          <td><input class="form-control" placeholder="Description"> </td>


                        </tr>
                        <tr>

                          <td>  @Html.DropDownList("LeaveTypeNo3", (IEnumerable<SelectListItem>)ViewBag.LeaveTypes, null, new { @class = "form-control" })</td>
                          <td><input class="form-control" placeholder="Allowed"> </td>
                          <td><input class="form-control" placeholder="Description"> </td>


                        </tr>

                        <tr>

                          <td>  @Html.DropDownList("LeaveTypeNo4", (IEnumerable<SelectListItem>)ViewBag.LeaveTypes, null, new { @class = "form-control" })</td>
                          <td><input class="form-control" placeholder="Allowed"> </td>
                          <td><input class="form-control" placeholder="Description"> </td>


                        </tr>
                        <tr>

                          <td>  @Html.DropDownList("LeaveTypeNo5", (IEnumerable<SelectListItem>)ViewBag.LeaveTypes, null, new { @class = "form-control" })</td>
                          <td><input class="form-control" placeholder="Allowed"> </td>
                          <td><input class="form-control" placeholder="Description"> </td>


                        </tr>
                        <tr>

                          <td>  @Html.DropDownList("LeaveTypeNo6", (IEnumerable<SelectListItem>)ViewBag.LeaveTypes, null, new { @class = "form-control" })</td>
                          <td><input class="form-control" placeholder="Allowed"> </td>
                          <td><input class="form-control" placeholder="Description"> </td>


                        </tr>
                        <tr>

                          <td>  @Html.DropDownList("LeaveTypeNo7", (IEnumerable<SelectListItem>)ViewBag.LeaveTypes, null, new { @class = "form-control" })</td>
                          <td><input class="form-control" placeholder="Allowed"> </td>
                          <td><input class="form-control" placeholder="Description"> </td>


                        </tr>
                        <tr>

                          <td> @Html.DropDownList("LeaveTypeNo8", (IEnumerable<SelectListItem>)ViewBag.LeaveTypes, null, new { @class = "form-control" })</td>
                          <td><input class="form-control" placeholder="Allowed"> </td>
                          <td><input class="form-control" placeholder="Description"> </td>


                        </tr>
                        <tr>

                          <td>  @Html.DropDownList("LeaveTypeNo9", (IEnumerable<SelectListItem>)ViewBag.LeaveTypes, null, new { @class = "form-control" })</td>
                          <td><input class="form-control" placeholder="Allowed"> </td>
                          <td><input class="form-control" placeholder="Description"> </td>


                        </tr>
                        <tr>

                          <td>  @Html.DropDownList("LeaveTypeNo10", (IEnumerable<SelectListItem>)ViewBag.LeaveTypes, null, new { @class = "form-control" })</td>
                          <td><input class="form-control" placeholder="Allowed"> </td>
                          <td><input class="form-control" placeholder="Description"> </td>


                        </tr>
                        <tr>

                          <td>  @Html.DropDownList("LeaveTypeNo11", (IEnumerable<SelectListItem>)ViewBag.LeaveTypes, null, new { @class = "form-control" })</td>
                          <td><input class="form-control" placeholder="Allowed"> </td>
                          <td><input class="form-control" placeholder="Description"> </td>


                        </tr>
                      </tbody>
                      @*<tfoot>
                        <tr>
                          <td></td>
                          <td>1</td>
                          <td>1</td>
                          <td>1</td>
                          <td>1</td>
                          <td>1</td>
                          <td>1</td>
                        </tr>
                      </tfoot>*@

                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>


    <div>

      <label><input type="radio" name="test" value="Department" />Department</label>
      <label><input type="radio" name="test" value="Employees" /> Employees</label>

      <br />
      <select class="form-control" ID="DropDownList2" Height="18px" Width="187px">
        <option Value="Department_Style_1">Department1</option>
        <option Value="Department_Style_2">Department 2</option>
        <option Value="Department_Style_3">Department 3</option>


        <option Value="Employees_Style_1">Employees 1</option>
        <option Value="Employees_Style_2">Employees 2</option>
        <option Value="Employees_Style_3">Employees 3</option>
      </select>

    </div>



    <br />

    <div class="form-group">
      <div class="col-md-offset-2 col-md-10">
        <input type="submit" value="Create" class="btn btn-primary" />
      </div>
    </div>
    <div>
      @Html.ActionLink("Back to List", "Index")
    </div>
  </div>
      

    }

  </div>
</div>





<script>
  $(document).ready(function () {

    //$('#multiselect').multiselect({
    //      includeSelectAllOption: true
    //  });

    $('#btnUpload').click(function () {

      // Checking whether FormData is available in browser
      if (window.FormData !== undefined) {

        var fileUpload = $("#FileUpload1").get(0);
        var files = fileUpload.files;

        // Create FormData object
        var fileData = new FormData();

        // Looping over all files and add it to FormData object
        for (var i = 0; i < files.length; i++) {
          fileData.append(files[i].name, files[i]);
        }

        // Adding one more key to FormData object
        //fileData.append('username', 'Manas');
        //alert('1');
        $.ajax({
          url: '/UserLeavePolicies/UploadFiles',
          type: "POST",
          contentType: false, // Not to set any content header
          processData: false, // Not to process data
          data: fileData,
          success: function (result) {
            //alert(result);
            //alert('4');
            $("#NewData").html(result);
          },
          error: function (err) {
            alert(err.statusText);
            //alert('5');
          }
        });
      } else {
        alert("FormData is not supported.");
      }
    });

    var options = $("#DropDownList2").html();
  $('#DropDownList2 :not([value^="App"])').remove();
   $('input:radio').change(function(e) {
    var text = $(this).val();
    $("#DropDownList2").html(options);
    $('#DropDownList2 :not([value^="' + text.substr(0, 3) + '"])').remove();
  });
  });
</script>



@section Scripts {
  @Scripts.Render("~/bundles/jqueryval")
}



